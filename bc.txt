ZÃPADOÄŒESKÃ UNIVERZITA V PLZNI 
Fakulta elektrotechnickÃ¡ 
Katedra materiÃ¡lÅ¯ a technologiÃ­ 
BAKALÃÅ˜SKÃ PROJEKT 
PocKETlab 
Autor prÃ¡ce:  
JiÅ™Ã­ Å vihla 

2025 
PocKETlab 
JiÅ™Ã­ Å vihla    2025 
ZADÃNÃ ZÃVÄšREÄŒNÃ‰HO BAKALÃÅ˜SKÃ‰HO 
PROJEKTU 
Fakulta elektrotechnickÃ¡ 
Katedra materiÃ¡lÅ¯ a technologiÃ­ 
JmÃ©no a pÅ™Ã­jmenÃ­: JiÅ™Ã­ Å vihla 

TÃ©ma prÃ¡ce: 
SystÃ©m pro podporu laboratornÃ­ch Ãºloh zaloÅ¾enÃ½ch na vzdÃ¡lenÃ©m 
parametrickÃ©m mÄ›Å™enÃ­ reÃ¡lnÃ½ch souÄÃ¡stek, kontrolovanÃ½ 
mikrokontrolerem. 
ZÃ¡sady pro vypracovÃ¡nÃ­: 
SystÃ©m bude obsahovat ÄÃ¡st obsahujÃ­cÃ­ dokumentaci/zadÃ¡nÃ­, kterÃ¡ bude realizovÃ¡na 
prostÅ™ednictvÃ­m markdown a ÄÃ¡st, kterÃ¡ bude interaktivnÃ­. SystÃ©m dÃ¡le umoÅ¾nÃ­ 
multiuÅ¾ivatelskou sprÃ¡vu a detekci pÅ™ihlÃ¡Å¡enÃ©ho uÅ¾ivatele a automatickÃ© odhlÃ¡Å¡enÃ­ po nÄ›jakÃ© 
dobÄ› neÄinnosti. 
SystÃ©m/modul pro prÃ¡ci s reÃ¡lnÃ½m zaÅ™Ã­zenÃ­m umoÅ¾nÃ­ vzdÃ¡lenÃ© parametrickÃ© automatizovanÃ© 
mÄ›Å™enÃ­ s konkrÃ©tnÃ­m pÅ™Ã­pravkem, kterÃ½ bude vyvinut bÄ›hem prÃ¡ce na tomto projektu. 



Abstrakt 
Tato prÃ¡ce se zabÃ½vÃ¡ nÃ¡vrhem jednoduchÃ©ho charakterografu kapesnÃ­ velikosti urÄenÃ©ho 
k mÄ›Å™enÃ­ V-A, frekvenÄnÃ­ch a dalÅ¡Ã­ch charakteristik na aktivnÃ­ch i pasivnÃ­ch dvojbranech (a 
jim podobnÃ½m obvodÅ¯m). 
V rÃ¡mci udrÅ¾enÃ­ jednoduchosti nÃ¡vrhu a pÅ™ijatelnÃ© uÅ¾ivatelskÃ© pÅ™Ã­vÄ›tivosti se prÃ¡ce omezuje 
na nÃ­zkofrekvenÄnÃ­ aplikace a provoz na malÃ©m napÄ›tÃ­. 
ZaÅ™Ã­zenÃ­ je zaloÅ¾eno na platformÄ› ESP32-S3 (4MB Flash + 2MB PSRAM), napÃ¡jeno pomocÃ­ 
USB Power Delivery 3.2 (do 20V@60W s podporou PPS) a je vybaveno 12-bit A/D a D/A 
pÅ™evodnÃ­ky s rychlostÃ­ 100ks/s. Pro mÄ›Å™enÃ­ V-A a zatÄ›Å¾ovacÃ­ch charakteristik je vybaveno 
napÃ¡jecÃ­m i zÃ¡tÄ›Å¾ovÃ½m kanÃ¡lem s moÅ¾nostÃ­ lineÃ¡rnÃ­ i pulznÃ­ regulace. 
KlÃ­ÄovÃ¡ slova 
Charakterograf, ESP32, USB PD, Power Delivery, PPS, ADC, DAC, LineÃ¡rnÃ­ stabilizace, 
SpÃ­nanÃ¡ zÃ¡tÄ›Å¾ 
Abstract 
This thesis focuses on electrical design of a simple, pocket-sized curve tracer intended for 
V-A, frequency and other characteristics on active and passive two-port (and similar) 
networks. 
To achieve simplicity of the design and user friendliness of the device, this thesis restricts to 
very low voltage and low frequency signals. 
The device is built on ESP32-S3 platform (with 4MB of Flash and 2MB of PSRAM), 
powered from USB Power Delivery 3.2 (up to 20V@60W with PPS support) and is equipped 
with 12-bit A/D and D/A converters achieving speeds up to 100ksps. For V-A and power 
load characteristics, the device is also equipped with power and sink circuitry (with linear 
and pulse regulation support). 
Key Words 
Curve tracer, ESP32, USB PD, Power Delivery, PPS, ADC, DAC, Linear stabilisation, Sink 
controller 

 
 
Obsah 
Ãšvod ................................................................................................................................. - 1 - 
1 Specifikace cÃ­lovÃ½ch poÅ¾adavkÅ¯ na zaÅ™Ã­zenÃ­ ............................................................ - 2 - 
1.1 Specifikace napÃ¡jecÃ­ho systÃ©mu ....................................................................... - 3 - 
1.2 Specifikace mÄ›Å™Ã­cÃ­ho systÃ©mu .......................................................................... - 4 - 
1.3 Specifikace Å™Ã­zenÃ­ ............................................................................................. - 5 - 
1.4 Specifikace Å™Ã­dÃ­cÃ­ aplikace ................................................................................ - 5 - 
2 Koncepce hardwarovÃ© ÄÃ¡sti ...................................................................................... - 6 - 
2.1 PÅ™ehled .............................................................................................................. - 6 - 
2.2 NapÃ¡jecÃ­ kaskÃ¡da a Power Delivery ................................................................. - 7 - 
2.3 Å˜Ã­dÃ­cÃ­ a komunikaÄnÃ­ jednotka ......................................................................... - 8 - 
2.4 VÃ½konovÃ© a signÃ¡lovÃ© vÃ½stupy ......................................................................... - 9 - 
2.5 SignÃ¡lovÃ© vstupy ............................................................................................ - 11 - 
3 UÅ¾ivatelskÃ¡ aplikace ............................................................................................... - 13 - 
ZÃ¡vÄ›r ............................................................................................................................... - 16 - 
Literatura ........................................................................................................................ - 17 - 
Seznam obrÃ¡zkÅ¯ .............................................................................................................. - 20 - 
 
 
Seznam symbolÅ¯ a zkratek 
ObecnÃ© zkratky 
nf  
vf  
V-A  
HW  
SW  
EK  
BOM  
el.  
RGB  
MVP  
PNG  
MQTT  
nÃ­zkofrekvenÄnÃ­ (signÃ¡ly) 
vysokofrekvenÄnÃ­ (signÃ¡ly) 
Volt-AmpÃ©rovÃ© (charakteristiky) 
Hardware 
Software 
EvropskÃ¡ Komise 
Bill Of Materials (kusovnÃ­k pouÅ¾itÃ©ho materiÃ¡lu) 
ElektronickÃ½ch 
Red, Green, Blue 
Minimum Viable Product 
Portable Network Graphics 
Message Queue Telemetry Transport 
Zkratky a oznaÄenÃ­ tÃ½kajÃ­cÃ­ se USB-C 
USB-C  
PD  
SPR  
EPR  
E-Mark  
PPS  
AVS  
Universal Serial Bus, type C 
Power Delivery 
Standard Power Range (standartnÃ­ vÃ½konovÃ½ rozsah) 
Extended Power Range (rozÅ¡Ã­Å™enÃ½ vÃ½konovÃ½ rozsah) 
Electronic Mark, Äip ovÄ›Å™ujÃ­cÃ­ moÅ¾nost pÅ™enosu 5 A kabelem 
Programmable Power Supply (programovatelnÃ½ zdroj) 
Adjustable Voltage Supply (regulovatelnÃ½ zdroj) 
ElektrotechnickÃ© zkratky a znaÄky 
A/D  
D/A  
SAR  
NTC  
PTC  
MOS  
FET  
TDP  
AC  
DC  
MCU  
SOC  
IIC/I2C  
SPI  
AnalogovÄ›-DigitÃ¡lnÃ­ (pÅ™evodnÃ­ky) 
DigitÃ¡lnÄ›-AnalogovÃ© (pÅ™evodnÃ­ky) 
Successive Approximation (aproximaÄnÃ­ A/D pÅ™evodnÃ­k) 
Negative Thermal Coefficient (zÃ¡pornÃ½ tepelnÃ½ koeficient) 
Positive Thermal Coefficient (kladnÃ½ tepelnÃ½ koeficient) 
Metal Oxide Semiconductor 
Field Effect Transistor (polem Å™Ã­zenÃ½ transistor) 
Thermal Dissipated Power (vyzÃ¡Å™enÃ½ tepelnÃ½ vÃ½kon) 
Alternating Current (stÅ™Ã­davÃ½ proud) 
Direct Current (stejnosmÄ›rnÃ½ proud) 
Micro Controller Unit (mikrokontroler) 
System On a Chip 
Inter-Integrated circuit 
Serial Peripheral Communication 
EMI  
PFM  
RAM  
ROM  
Flash  
PSRAM  
OZ/OPAMP  
CC  
CV  
LED  
Electro-Magnetic Interference (elektromagnetickÃ© ruÅ¡enÃ­) 
Pulse Frequency Modulation (pulznÄ› frekvenÄnÃ­ modulace) 
Random Access Memory 
Read Only Memory 
PamÄ›Å¥ ROM typu Flash 
Pseudostatic RAM 
OperaÄnÃ­ ZesilovaÄ 
Continuous Current (proudovÃ© Å™Ã­zenÃ­) 
Continuous Voltage (napÄ›Å¥ovÃ© Å™Ã­zenÃ­) 
Light Emitting Diode 
Zkratky ve spojitosti se starÅ¡Ã­ technikou 
PC  
AT  
XT  
MS  
BASIC  
Personal Computer (osobnÃ­ poÄÃ­taÄ) 
Advanced Technology (ve spoj. s IBM PC) 
eXTended (ve spoj. s IBM PC) 
Microsoft 
Beginner's All-purpose Symbolic Instruction Code 
Zkratky a oznaÄenÃ­ zÃ¡kladnÃ­ch elektrickÃ½ch veliÄin 
ï¿½
ï¿½ 
ï¿½
ï¿½ 
ï¿½
ï¿½ 
ï¿½
ï¿½ğ‘…  
ï¿½
ï¿½ 
V 
A 
W 
Hz 
NapÄ›tÃ­ 
Proud 
ÄŒinnÃ½ vÃ½kon 
RelativnÃ­ permitivita (bezrozmÄ›rnÃ¡ veliÄina) 
Frekvence 
MateriÃ¡lovÃ© zkratky a symboly 
FR-4  
PCB  
sklolaminÃ¡tovÃ½ substrÃ¡t, zÃ¡klad PCB 
Printed Circuit Board 
ÃšVOD 
Ãšvod 
Jako student, uÄitel a volnoÄasovÃ½ konstruktÃ©r elektronickÃ½ch zaÅ™Ã­zenÃ­ se Äasto setkÃ¡vÃ¡m 
s potÅ™ebou mÄ›Å™enÃ­ rÅ¯znÃ½ch charakteristik pouÅ¾itÃ½ch souÄÃ¡stek â€“ aÅ¥ uÅ¾ pro svoji Äi pracovnÃ­ 
potÅ™ebu. MÃ­t ovÅ¡em â€malou domÃ¡cÃ­ elektronickou laboratoÅ™â€œ je dosti nÃ¡kladnÃ© a aÅ¾ 
v nedÃ¡vnÃ© dobÄ› jsem si poÅ™Ã­dil stolnÃ­ digitÃ¡lnÃ­ osciloskop. S vestavÄ›nÃ½m generÃ¡torem 
signÃ¡lu.  ÄŒasto ovÅ¡em dÃ¡le narÃ¡Å¾Ã­m na potÅ™eby zesÃ­lenÃ­ tohoto vÃ½stupu (kvÅ¯li vÃ½stupnÃ­ 
impedanci gen.), potÅ™ebÄ› pÅ™ipojenÃ­ dalÅ¡Ã­ho kanÃ¡lu, externÃ­ho napÃ¡jenÃ­ apod. 
Z pohledu technika bÄ›Å¾nÃ¡ praxe, ovÅ¡em mÃ­t tolik zaÅ™Ã­zenÃ­ ve svÃ©m vlastnictvÃ­ je nÃ¡kladnÃ© 
a hlavnÄ› nÃ¡roÄnÃ© i na mÃ­sto kvÅ¯li skladovÃ¡nÃ­, ale i pÅ™i mÄ›Å™enÃ­, coÅ¾ mi potvrzujÃ­ i moji Å¾Ã¡ci. 
ÄŒasto ovÅ¡em nenÃ­ tÅ™eba nikterak pÅ™esnÃ½ch mÄ›Å™Ã­cÃ­ch pÅ™Ã­strojÅ¯ a Äasto by staÄil A/D a D/A 
konvertor s regulovatelnÃ½m zdrojem. 
V prÅ¯bÄ›hu studia na SÅ  jsem Äasto Äerpal inspiraci ze starÅ¡Ã­ch i aktuÃ¡lnÃ­ch vydÃ¡nÃ­ Äasopisu 
AmatÃ©rskÃ© RÃ¡dio, primÃ¡rnÄ› z konstrukÄnÃ­ch (modrÃ½ch) vydÃ¡nÃ­, kde se kromÄ› 8/16-ti 
bitovÃ½ch osobnÃ­ch poÄÃ­taÄÅ¯ (1/1989 B,1/1988 B), digitronovÃ½ch stopek (12/1974 A) a 
spousty dalÅ¡Ã­ch zapojenÃ­ vyskytla i konstrukce mÄ›Å™Ã­cÃ­ch A/D a D/A pÅ™evodnÃ­kÅ¯ k PC AT/XT 
s komunikacÃ­ pÅ™es paralelnÃ­ port a ovlÃ¡dacÃ­m SW v MS BASICu. A jelikoÅ¾ digitÃ¡lnÃ­ 
osciloskopy a programovatelnÃ© zdroje (napÃ¡jecÃ­ i signÃ¡lovÃ©) jsou dnes jiÅ¾ bÄ›Å¾nou praxÃ­, proÄ 
si nevyrobit svÅ¯j s trochou â€modernizaÄnÃ­châ€œ Ãºprav, kterÃ© jsou dÃ¡le v tÃ©to prÃ¡ci zmÃ­nÄ›ny. 
DÃ­ky neustÃ¡lÃ©mu vÃ½voji novÃ½ch technologiÃ­ a standardÅ¯ (vÄetnÄ› Ãºstupu od LPT a BASICu) 
je moÅ¾nÃ© celÃ© zaÅ™Ã­zenÃ­ stavÄ›t mnohem kompaktnÄ›ji a vybavit jej napÅ™. pÅ™evodnÃ­ky s vyÅ¡Å¡Ã­m 
rozliÅ¡enÃ­m i rychlostÃ­, napÃ¡jenÃ­m pÅ™es USB-C Äi konektivitou WiFi a webovÃ½m rozhranÃ­m. 
DÃ¡le lze pak pokraÄovat jinÃ½mi praktickÃ½mi funkcemi, jako je napÅ™. programovatelnÃ½ 
napÃ¡jecÃ­ zdroj, spÃ­nanÃ¡ zÃ¡tÄ›Å¾ apod. 
TakovÃ© zaÅ™Ã­zenÃ­ je vhodnÃ© i pro Å¾Ã¡ky a studenty Å¡kol technickÃ©ho smÄ›ru, a to nejen pro 
mÄ›Å™enÃ­ charakteristik elektronickÃ½ch souÄÃ¡stek a obvodÅ¯, ale takÃ© napÅ™. pro galvanickÃ© 
pokovovÃ¡nÃ­ apod. - 1 - 
SPECIFIKACE CÃLOVÃCH POÅ½ADAVKÅ® NA ZAÅ˜ÃZENÃ 
1 Specifikace cÃ­lovÃ½ch poÅ¾adavkÅ¯ na zaÅ™Ã­zenÃ­ 
Z koncepce vyplÃ­vÃ¡ rozdÄ›lenÃ­ zaÅ™Ã­zenÃ­ na 3 ÄÃ¡sti: 
â€¢ Å˜Ã­dÃ­cÃ­ ÄÃ¡st zajiÅ¡Å¥ujÃ­cÃ­ komunikaci a ovlÃ¡dÃ¡nÃ­ vÅ¡ech nastavenÃ­ zaÅ™Ã­zenÃ­, vÄetnÄ› 
nastavenÃ­ provoznÃ­ch hodnot a ochran proti pÅ™etÃ­Å¾enÃ­. 
â€¢ MÄ›Å™Ã­cÃ­ (analyzaÄnÃ­ ÄÃ¡st) sestÃ¡vajÃ­cÃ­ z A/D a D/A pÅ™evodnÃ­kÅ¯ a jim pÅ™idÄ›lenÃ½ch 
zesilovaÄÅ¯ a filtrÅ¯. 
â€¢ NapÃ¡jecÃ­ (spÃ­nacÃ­) ÄÃ¡st, schopnÃ¡ mÄ›Å™enÃ© prvky  
Obr.  1 - ZjednoduÅ¡enÃ© blokovÃ© schÃ©ma zaÅ™Ã­zenÃ­ 
Takto navrÅ¾enÃ© zaÅ™Ã­zenÃ­ by mÄ›lo bÃ½t vhodnÃ© pro vÄ›tÅ¡inu zÃ¡kladnÃ­ch mÄ›Å™enÃ­, jako jsou: 
â€¢ V-A charakteristiky diod 
â€¢ TeplotnÃ­ zÃ¡vislosti NTC a PTC prvkÅ¯ (pÅ™i pÅ™idÃ¡nÃ­ topnÃ©ho tÄ›lesa) 
â€¢ MÄ›Å™enÃ­ zesÃ­lenÃ­ tranzistorÅ¯ 
â€¢ FrekvenÄnÃ­ charakteristiky aktivnÃ­ch i pasivnÃ­ch nf filtrÅ¯ 
â€¢ ZatÄ›Å¾ovacÃ­ charakteristiky usmÄ›rÅˆovaÄÅ¯ 
â€¢ PrÅ¯bÄ›hy (pomalejÅ¡Ã­ch) pÅ™echodovÃ½ch dÄ›jÅ¯ - 2 - 
SPECIFIKACE CÃLOVÃCH POÅ½ADAVKÅ® NA ZAÅ˜ÃZENÃ 
1.1 Specifikace napÃ¡jecÃ­ho systÃ©mu 
NapÃ¡jecÃ­ kaskÃ¡da zaÅ™Ã­zenÃ­ musÃ­ bÃ½t schopna dosÃ¡hnout provoznÃ­ch napÄ›tÃ­ a proudÅ¯ 
zÃ¡kladnÃ­ch el. prvkÅ¯, pro jejichÅ¾ mÄ›Å™enÃ­ je zaÅ™Ã­zenÃ­ urÄeno. Ve svÃ© praxi (pÅ™i prÃ¡ci na malÃ©m 
napÄ›tÃ­) se vÄ›tÅ¡inou setkÃ¡vÃ¡m se zapojenÃ­mi navrÅ¾enÃ½mi pro provoz do napÄ›tÃ­ 12 V, max. 
pak do 24 V (pouÅ¾Ã­vanÃ½ch v industriÃ¡lnÃ­m prostÅ™edÃ­) a proudu cca do 1-2 A. CelkovÃ½ 
ztrÃ¡tovÃ½ vÃ½kon tedy nepÅ™esÃ¡hne 60 W, coÅ¾ je i maximÃ¡lnÃ­ ztrÃ¡tovÃ½ vÃ½kon pro napÃ¡jenÃ­ skrze 
USB-C (bez EPR a bez E-Mark Äipu v propojovacÃ­m kabelu) s pouÅ¾itÃ­m protokolu PD 3.x 
(viz Tab.1) 
Tab. 1 - PÅ™ehled napÃ¡jecÃ­ch rozsahÅ¯ USB PD 
PD 3.2 
Nap. napÄ›tÃ­ [V] 
SPR 
20 
SPR+E-Mark 
20 
EPR+E-Mark 
PÅ™enÃ¡Å¡enÃ½ proud [A] 
48 
ZtrÃ¡tovÃ½ vÃ½kon [W] 
3 
60 
5 
100 
5 
240 
VÃ½bÄ›r USB-C jako napÃ¡jecÃ­ho standardu pro toto zaÅ™Ã­zenÃ­ takÃ© dÃ¡le dovoluje vyuÅ¾itÃ­ Å¡iroce 
dostupnÃ½ch napÃ¡jecÃ­ch zdrojÅ¯ pro mobilnÃ­ zaÅ™Ã­zenÃ­ vÄetnÄ› powerbank, coÅ¾ je nejen 
praktickÃ©, ale takÃ© vyhovujÃ­cÃ­ myÅ¡lence â€jednotnÃ© nabÃ­jeÄkyâ€œ naÅ™Ã­zenÃ© direktivou EK 
2022/2380, aÄkoliv se na toto zaÅ™Ã­zenÃ­ nevztahuje. 
Regulace vÃ½stupnÃ­ho napÄ›tÃ­ PD zdroje je buÄ moÅ¾nÃ¡ krokovÄ› (hladiny 5, 9, 12, 15, 20 V), 
nebo za pomoci protokolÅ¯ PPS a AVS pro jemnÃ© krokovÃ¡nÃ­ (PPS: 20 mV, AVS: 100 mV). 
Zde ovÅ¡em velmi zÃ¡leÅ¾Ã­ na konstrukci napÃ¡jecÃ­ho zdroje, jelikoÅ¾ moÅ¾nosti regulace buÄ 
nemusejÃ­ bÃ½t pÅ™Ã­tomny vÅ¯bec anebo jen v omezenÃ© mÃ­Å™e (napÅ™. pouze pro rozsah 4-11 V). 
ZaÅ™Ã­zenÃ­ tedy musÃ­ bÃ½t vybaveno vlastnÃ­m regulovatelnÃ½m zdrojem (ideÃ¡lnÄ› s moÅ¾nostÃ­ 
lineÃ¡rnÃ­, ale i spÃ­nanÃ© regulace pro vyÅ¡Å¡Ã­ efektivitu), kterÃ½ musÃ­ bÃ½t schopen operovat 
s dostateÄnou pÅ™esnostÃ­ v rozsahu 0-20 V. MoÅ¾nost proudovÃ© regulace je pak pro nelineÃ¡rnÃ­ 
komponenty takÃ© velmi praktickÃ¡. - 3 - 
SPECIFIKACE CÃLOVÃCH POÅ½ADAVKÅ® NA ZAÅ˜ÃZENÃ 
Druhou ÄÃ¡stÃ­ napÃ¡jecÃ­ho systÃ©mu je pak moÅ¾nost spÃ­nanÃ© zÃ¡tÄ›Å¾e, kterÃ¡ dovolÃ­ testovÃ¡nÃ­ 
zatÄ›Å¾ovacÃ­ch charakteristik bateriÃ­, DC/DC konvertorÅ¯, lin. stabilizÃ¡torÅ¯ a rÅ¯znÃ½ch spÃ­nacÃ­ch 
prvkÅ¯. SamozÅ™ejmostÃ­ je potÅ™eba regulace ztrÃ¡tovÃ©ho vÃ½konu proudovÄ› Äi napÄ›Å¥ovÄ› (ideÃ¡lnÄ› 
obojÃ­m). 
1.2 Specifikace mÄ›Å™Ã­cÃ­ho systÃ©mu 
MÄ›Å™Ã­cÃ­ systÃ©m je zodpovÄ›dnÃ½ za buzenÃ­ mÄ›Å™enÃ©ho obvodu a mÄ›Å™enÃ­ jeho odezvy ve 
zvolenÃ©m spektru (napÄ›Å¥ovÃ©m, frekvenÄnÃ­m, â€¦). V pÅ™Ã­padÄ› potÅ™eby regulace vyÅ¡Å¡Ã­ho 
vÃ½konu u by byla vhodnÃ¡ moÅ¾nost zesÃ­lenÃ­ vÃ½stupu (Äi spojenÃ­ s regulovatelnou napÃ¡jecÃ­ 
kaskÃ¡dou). MÄ›Å™Ã­cÃ­ systÃ©m by mÄ›l mÃ­t takÃ© stejnÃ© (nebo vyÅ¡Å¡Ã­) rozliÅ¡enÃ­ vstupu neÅ¾ vÃ½stupu 
a mÄ›lo by bÃ½t dostateÄnÄ› jemnÃ© pro reÃ¡lnÃ© pouÅ¾itÃ­, nikoliv jako â€technickÃ© demoâ€œ kterÃ© 
nastÃ­nÃ­ koncepty, ale vÃ½stupy jsou â€zralÃ© na reÃ¡lnÃ© mÄ›Å™enÃ­â€œ.  
DÃ¡le je praktickÃ¡ konstrukce se dvÄ›ma signÃ¡lovÃ½mi vstupy a vÃ½stupy, jednak k zapojenÃ­ 
vstupu v pseudo-diferenciÃ¡lnÃ­m mÃ³du, ale i pro testovÃ¡nÃ­ napÅ™. nf smÄ›Å¡ovaÄe Äi stereo 
zesilovaÄe. 
Obr.  2 - ZjednoduÅ¡enÃ© blokovÃ© schÃ©ma s rozdÄ›lenou mÄ›Å™Ã­cÃ­ ÄÃ¡stÃ­ - 4 - 
SPECIFIKACE CÃLOVÃCH POÅ½ADAVKÅ® NA ZAÅ˜ÃZENÃ 
1.3 Specifikace Å™Ã­zenÃ­ 
CelÃ© zaÅ™Ã­zenÃ­ by mÄ›lo bÃ½t Å™Ã­zeno modernÃ­m mikropoÄÃ­taÄem s dostateÄnou velikostÃ­ pamÄ›ti 
a rychlostÃ­ pro vyuÅ¾itÃ­ plnÃ©ho potenciÃ¡lu mÄ›Å™Ã­cÃ­ch a generÃ¡torickÃ½ch pÅ™evodnÃ­kÅ¯. DÃ¡le by 
takÃ© mÄ›l bÃ½t vybaven vlastnÃ­m (vestavÄ›nÃ½m) A/D pÅ™evodnÃ­kem pro kontroly napÄ›tÃ­ 
v rÅ¯znÃ½ch ÄÃ¡stech zaÅ™Ã­zenÃ­, coÅ¾ by dovolilo kontrolu chyb a usnadnilo hledÃ¡nÃ­ pÅ™Ã­padnÃ½ch 
zÃ¡vad. Zde jiÅ¾ nenÃ­ potÅ™eba nikterak vysokÃ¡ pÅ™esnost Äi linearita, jelikoÅ¾ se jednÃ¡ pouze o 
kontrolnÃ­ mechanismus. 
DÃ¡le by bylo vhodnÃ©, aby bylo MCU vybaveno USB Å™adiÄem pro pÅ™Ã­mÃ© propojenÃ­ s PC a 
konektivitou WiFi/Bluetooth pro vzdÃ¡lenÃ© pÅ™ipojenÃ­.  
Obr.  3 - ZjednoduÅ¡enÃ© blokovÃ© schÃ©ma zaÅ™Ã­zenÃ­ z pohledu MCU 
1.4 Specifikace Å™Ã­dÃ­cÃ­ aplikace 
Aplikace pro Å™Ã­zenÃ­ tohoto zaÅ™Ã­zenÃ­ by mÄ›la bÃ½t pÅ™ehlednÃ¡ a jednoduchÃ¡. MÄ›la by dovolovat 
uÅ¾ivateli zobrazovat mÄ›Å™enÃ¡ data (ideÃ¡lnÄ› i v reÃ¡lnÃ©m Äase), uklÃ¡dat charakteristiky a 
nastavovat parametry mÄ›Å™enÃ­. DÃ¡le by takÃ© mÄ›la bÃ½t optimalizovÃ¡na pro mobilnÃ­ zaÅ™Ã­zenÃ­ 
(napÅ™. pro tablety Äi chytrÃ© telefony).  - 5 - 
KONCEPCE HARDWAROVÃ‰ ÄŒÃSTI 
2 Koncepce hardwarovÃ© ÄÃ¡sti 
2.1 PÅ™ehled 
ZaÅ™Ã­zenÃ­ je celkovÄ› rozdÄ›leno do nÄ›kolika menÅ¡Ã­ch celkÅ¯ pro lepÅ¡Ã­ pÅ™ehlednost (viz 
podkapitoly dÃ¡le). KaÅ¾dÃ¡ ÄÃ¡st pak obsahuje min. jednu klÃ­Äovou komponentu a jejÃ­ podpÅ¯rnÃ© 
obvody. TÄ›mito klÃ­ÄovÃ½mi komponentami jsou: 
â€¢ ESP32-S3 jakoÅ¾to Å™Ã­dÃ­cÃ­ jednotka celÃ©ho zaÅ™Ã­zenÃ­ 
â€¢ CH224Q/K pro Å™Ã­zenÃ­ Power Delivery 
â€¢ MCP3202 je 2x 12-bit A/D pÅ™evodnÃ­k 
â€¢ MCP4822 je 2x 12-bit D/A pÅ™evodnÃ­k 
Komunikace po desce je Å™eÅ¡ena pomocÃ­ vnitÅ™nÃ­ IIC a SPI linky. Na IIC lince je pÅ™ipojen Äip 
pro Å™Ã­zenÃ­ PD a konektor pro malÃ½ stavovÃ½ displej. SPI je pak pouÅ¾ito pro vysokorychlostnÃ­ 
komunikaci s A/D a D/A pÅ™evodnÃ­ky. 
Obr.  4 - blokovÃ© schÃ©ma navrÅ¾enÃ©ho zaÅ™Ã­zenÃ­ 
U napÃ¡jecÃ­ch kontaktÅ¯ jsou pro potlaÄenÃ­ pÅ™echodovÃ½ch jevÅ¯ pÅ™i skokovÃ©m nÃ¡rÅ¯stu odbÄ›ru 
jednotlivÃ½ch obvodÅ¯ (hlavnÄ› pÅ™i komunikaci pÅ™es WiFi, mÄ›Å™enÃ­ apod.) umÃ­stÄ›ny filtraÄnÃ­ 
keramickÃ© kondenzÃ¡tory, vÄ›tÅ¡inovÄ› ve sloÅ¾enÃ­ dvojice 10ğœ‡ğ¹ + 100ğ‘›ğ¹. - 6 - 
KONCEPCE HARDWAROVÃ‰ ÄŒÃSTI 
PoznÃ¡mka: KaÅ¾dÃ¡ z tÄ›chto podkapitol (3.x) se vÄ›nuje jednÃ© ÄÃ­selnÄ› korespondujÃ­cÃ­ stranÄ› 
schÃ©matu1) 
Na desce je takÃ© implementovÃ¡na kontrola teploty formou konektoru pro NTC a ventilÃ¡tor 
o rozmÄ›rech 20x20mm. 
V pÅ™ednÃ­ ÄÃ¡sti jsou umÃ­stÄ›ny stavovÃ© RGB LED diody a IIC konektor pro pÅ™Ã­padnÃ½ stavovÃ½ 
displej Äi jinou periferii. 
Obr.  5 - Vizualizace konceptu (spodnÃ­ strana) 
2.2 NapÃ¡jecÃ­ kaskÃ¡da a Power Delivery 
CÃ­lem napÃ¡jecÃ­ kaskÃ¡dy je ESD ochrana USB portu, napÃ¡jenÃ­ Å™Ã­dÃ­cÃ­ch prvkÅ¯ a nastavenÃ­ USB 
PD.  
USB-C konektor je zapojen dle specifikace pro USB 2.0 s alternativnÃ­m mÃ³dem (piny SBU1 
a SBU2)2 pro komunikaci napÅ™. s vlastnÃ­m programovatelnÃ½m zdrojem nebo jinÃ½m 
zaÅ™Ã­zenÃ­m. Tato externÃ­ linka je zapojenÃ¡ samostatnÄ›. VÅ¡echny datovÃ© linky jsou pak 
chrÃ¡nÄ›ny proti ESD transilovÃ½m polem certifikovanÃ½m do 25kV se zÃ¡vÄ›rnÃ½m napÄ›tÃ­m 6,1V, 
1Viz pÅ™Ã­loha I, str. 1-5 
2Viz literatura (15), sekce 6 - alternativnÃ­ mÃ³dy USB-C - 7 - 
KONCEPCE HARDWAROVÃ‰ ÄŒÃSTI 
vÅ¡echny vnitÅ™nÃ­ komponenty jsou pak certifikovÃ¡ny pro 2kV. NapÃ¡jecÃ­ linky jsou chrÃ¡nÄ›ny 
oddÄ›lenÄ› kvÅ¯li zvÃ½Å¡enÃ©mu napÄ›tÃ­. 
Å˜Ã­zenÃ­ Power Delivery je Å™eÅ¡eno tÅ™emi zpÅ¯soby â€“ Å™adiÄem s podporou PPS, Å™adiÄem bez 
podpory PPS a â€jednoduchÃ½mi rezistoryâ€œ. CÃ­lem tohoto rozhodnutÃ­ bylo pÅ™ipravit vÃ­ce 
moÅ¾nostÃ­ pro vÃ½robu pÅ™i pÅ™Ã­padnÃ½ch problÃ©mech (napÅ™. z dÅ¯vodu vysokÃ© poptÃ¡vky po 
urÄitÃ©m typu). 
V tomto nÃ¡vrhu byly pouÅ¾ity Å™adiÄe z rodiny CH2243 (var. K a Q). JednÃ¡ se o znÃ¡mÃ½ a levnÃ½ 
Å™Ã­dÃ­cÃ­ Äip podporujÃ­cÃ­ Å¡irokou Å¡kÃ¡lu standardÅ¯. V nedÃ¡vnÃ© dobÄ› do tÃ©to rodiny pÅ™ibyla i var. 
Q s podporou komunikace pÅ™es IIC a moÅ¾nostÃ­ vyÅ¾Ã¡dÃ¡nÃ­ PPS/AVS. Nahradila tak 
zastarÃ¡vajÃ­cÃ­ Äip CH224A s podobnÃ½mi moÅ¾nostmi. Varianta K je nejrozÅ¡Ã­Å™enÄ›jÅ¡Ã­ (takÃ© kvÅ¯li 
svÃ© cenÄ›), bez podpory PPS/AVS. ZbylÃ½ napÄ›Å¥ovÃ½ rozdÃ­l je pak tÅ™eba dorovnat 
stabilizÃ¡torem (vÃ­ce v sekci. 3.4), coÅ¾ sniÅ¾uje efektivitu napÃ¡jecÃ­ho systÃ©mu a toto Å™eÅ¡enÃ­ je 
tedy urÄeno pouze pro pÅ™Ã­pady nedostatku var. Q u vÃ½robce PCB.4 
PoslednÃ­ moÅ¾nostÃ­ je pak osazenÃ­ 5,1ğ‘˜Î©5 rezistorÅ¯. JednÃ¡ se spÃ­Å¡e o â€nouzovÃ½ mÃ³dâ€œ 
v pÅ™Ã­padÄ› problÃ©mÅ¯ s Å™adiÄi PD. Toto Å™eÅ¡enÃ­ ovÅ¡em omezÃ­ napÃ¡jenÃ­ na 5V 3A s USB-C 
zdroji. Funkci programovatelnÃ©ho napÃ¡jenÃ­ by pak bylo moÅ¾nÃ© obnovit externÃ­m Å™adiÄem 
vyuÅ¾Ã­vajÃ­cÃ­m ke komunikaci s MCU piny pro alternativnÃ­ mÃ³d USB-C. 
Druhou ÄÃ¡stÃ­ napÃ¡jecÃ­ kaskÃ¡dy je DC/DC mÄ›niÄ pro napÃ¡jenÃ­ klÃ­ÄovÃ½ch komponent. Zde byl 
pouÅ¾it Äip AP632036 s integrovanÃ½m vÃ½konovÃ½m spÃ­nÃ¡nÃ­m a funkcÃ­ potlaÄenÃ­ EMI. Ten byl 
vybrÃ¡n na zÃ¡kladÄ› zkuÅ¡enostÃ­ z jinÃ©ho projektu dÃ­ky svÃ© jednoduchosti a vysokÃ© efektivitÄ› 
konverze i pÅ™i velmi nÃ­zkÃ½ch odbÄ›rech. ZÃ¡roveÅˆ takÃ© podporuje PFM a FSS pro zvÃ½Å¡enÃ­ 
ÃºÄinnosti a potlaÄenÃ­ ruÅ¡enÃ­.  
2.3 Å˜Ã­dÃ­cÃ­ a komunikaÄnÃ­ jednotka 
CelÃ© zaÅ™Ã­zenÃ­ ovlÃ¡dÃ¡ SOC ESP32-S3 (model FH4R27 s integrovanou 4MB Flash a 2MB 
PSRAM). Varianta S3 je vybavena dvoujÃ¡drovÃ½m 32-bit LX7 CPU s taktem 240MHz, 
2,4GHz WiFi a Bluetooth a Å™adiÄi IIC, SPI, UART, USB a dalÅ¡Ã­ch. TakÃ© mÃ¡ vestavÄ›nÃ© A/D 
3Viz literatura (26) 
4V prÅ¯bÄ›hu vÃ½voje doÅ¡lo k vyprodÃ¡nÃ­ naprostÃ© vÄ›tÅ¡iny var. Q u pÅ™ednÃ­ch svÄ›tovÃ½ch prodejcÅ¯ el. komponent 
5Viz literatura (15), sekce 3.2, tab. 7 â€“ platnÃ© hodnoty pull-down rezistorÅ¯ pro DFP 
6Viz literatura (7) 
7Viz literatura (8), sekce 1.2, tab. 1-1 â€“ porovnÃ¡nÃ­ jednotlivÃ½ch modelÅ¯ ESP32-S3 - 8 - 
KONCEPCE HARDWAROVÃ‰ ÄŒÃSTI 
a D/A pÅ™evodnÃ­ky, z nichÅ¾ ADC1 je pouÅ¾it pro kontrolu napÄ›tÃ­ na desce a vÃ½stupech. ADC2 
je multiplexovÃ¡n s WiFi rozhranÃ­m a nemÅ¯Å¾e bÃ½t pÅ™i jejÃ­ funkci pouÅ¾it.8 Tyto pÅ™evodnÃ­ky, 
aÄkoliv takÃ© 12-ti bitovÃ©, nemohly bÃ½t pro mÄ›Å™enÃ­ vstupnÃ­ch signÃ¡lÅ¯ pouÅ¾ity z dÅ¯vodu 
vysokÃ© nelinearity mÄ›Å™enÃ­ ve vyÅ¡Å¡Ã­ polovinÄ› napÄ›Å¥ovÃ©ho rozsahu (cca od 2V). SignÃ¡ly jsou 
tedy spÃ­Å¡e â€referenÄnÃ­â€œ a kontrolujÃ­ funkci ostatnÃ­ch periferiÃ­, nikoliv jejich pÅ™esnost. 
Pro konektivitu je v levÃ© hornÃ­ ÄÃ¡sti umÃ­stÄ›na SMD antÃ©na. Zde je prvnÃ­ ÄÃ¡st PCB s Å™Ã­zenou 
impedancÃ­ kvÅ¯li vedenÃ­ vf signÃ¡lu. Cesty, Å¡Ã­Å™e izolaÄnÃ­ mezery a vnitÅ™nÃ­ vrstvy jsou navrÅ¾eny 
na 50â„¦ impedanci pÅ™i frekvenci 2400MHz. Pro lepÅ¡Ã­ pÅ™Ã­jem je na doporuÄenÃ­ vÃ½robce 
v signÃ¡lovÃ© cestÄ› zapojen C-L-C ÄlÃ¡nek typu Ï€ pro lepÅ¡Ã­ impedanÄnÃ­ pÅ™izpÅ¯sobenÃ­ na vstupnÃ­ 
pin Äipu (LNA_IN).9 Pro pÅ™esnÃ© nalazenÃ­ C-L-C ÄlÃ¡nku vÃ½robce doporuÄuje vlastnÃ­ mÄ›Å™enÃ­ 
kvÅ¯li odliÅ¡nÃ½m vÃ½robnÃ­m procesÅ¯m u vÃ½robcÅ¯ PCB. V tomto pÅ™Ã­padÄ› bylo vyuÅ¾ito 
postupnÃ½ch praktickÃ½ch testÅ¯ (â€NÄ›co tam dÃ¡m a uvidÃ­m co to udÄ›lÃ¡â€œ â€“ pozn. autora). DÃ­ky 
nÃ­zkÃ½m pÅ™enosovÃ½m rychlostem je vÅ¡ak zapojenÃ­ â€relativnÄ› benevolentnÃ­â€œ. 
DÃ¡le je v blÃ­zkosti SOC umÃ­stÄ›n 40MHz krystal. SOC je pak vybaven budÃ­cÃ­mi obvody a 
internÃ­ programovatelnou nÃ¡sobiÄkou. 
DruhÃ¡ ÄÃ¡st PCB s Å™Ã­zenou impedancÃ­ je vedenÃ­ datovÃ½ch linek USB. Zde jde o diferenciÃ¡lnÃ­ 
pÃ¡r a na doporuÄenÃ­ vÃ½robce SOC jsou na lince umÃ­stÄ›ny dva 0Î© rezistory.10 
2.4 VÃ½konovÃ© a signÃ¡lovÃ© vÃ½stupy 
ZaÅ™Ã­zenÃ­ je vybaveno dvÄ›ma dvoukanÃ¡lovÃ½mi 12-bit D/A konvertory (pro vÃ½konovou a 
signÃ¡lovou ÄÃ¡st zvlÃ¡Å¡Å¥) MCP482211 s internÃ­ napÄ›Å¥ovou referencÃ­ a max. vzorkovacÃ­ 
frekvencÃ­ 100kHz (pÅ™i 5V napÃ¡jenÃ­). VÃ½stupy jsou opatÅ™eny 10ğ‘›ğ¹ kondenzÃ¡tory pro 
potlaÄenÃ­ vyÅ¡Å¡Ã­ch harmonickÃ½ch signÃ¡lÅ¯.12 
Pro zesÃ­lenÃ­ signÃ¡lu je zde vyuÅ¾it obvod LM324 (4x OZ) napÃ¡jenÃ½ pÅ™Ã­mo z napÃ¡jecÃ­ho 
vstupu. AnalogovÃ© vÃ½stupy z D/A pÅ™evodnÃ­ku B jsou zapojeny na jednotky C a D OZ se 
zesÃ­lenÃ­m 6,7x (16,5dB), s odboÄkou pro pÅ™Ã­padnou Ãºpravu zesÃ­lenÃ­. Ta je spoleÄnÄ› 
s vÃ½stupem vyvedena na vÃ½stupnÃ­ konektor J3. Lze tak docÃ­lit velmi jemnÃ©ho rozliÅ¡enÃ­ na 
8Viz literatura (8), sekce 4.2.2.1 â€“ SAR ADC 
9Viz literatura (3), sekce 1.4.5 â€“ RF 
10 Viz literatura (3), sekce 1.3.13 â€“ USB 
11 Viz literatura (23) 
12 Viz literatura (23), sekce 6.3 â€“ zohlednÄ›nÃ­ vÃ½stupnÃ­ho Å¡umu - 9 - 
KONCEPCE HARDWAROVÃ‰ ÄŒÃSTI 
sig. VÃ½stupech, coÅ¾ je vhodnÃ© napÅ™. pro testovÃ¡nÃ­ nf mikrofonnÃ­ch pÅ™edzesilovaÄÅ¯. ZesÃ­lenÃ­ 
lze ladit v rozmezÃ­ 2 - 6,7 dle vzorce (1) pÅ™ipojenÃ­m ğ‘…ğ´ğ‘…ğ¹ğ‘¥ mezi piny DACx a ARFx: 
ï¿½
ï¿½ğ‘¢ =6,7âˆ’
 2209
 10 âˆ™ (ğ‘…ğ´ğ‘…ğ¹ğ‘¥ +47)
 (1) 
PouÅ¾itÃ© A/D pÅ™evodnÃ­ky majÃ­ takÃ© programovatelnÃ½ vÃ½stupnÃ­ zesilovaÄ s moÅ¾nostÃ­ volby 
plnÃ©ho nebo poloviÄnÃ­ho rozsahu. VÃ½stupnÃ­ rozliÅ¡enÃ­ lze zjistit dle vzorce (2): 
ï¿½
ï¿½ğ‘€ğ´ğ‘‹ğ‘…ğ¸ğ‘† = ğ‘Ÿğ‘œğ‘§ğ‘ ğ‘â„ âˆ™ 3,3
 212 âˆ’1
 âˆ™ ğ´ğ‘¢ = 1
 2
 âˆ™ 3,3
 4096 âˆ’1
 âˆ™ 2 = 806ğœ‡ğ‘‰ 
(2) 
PÅ™i vÃ½stupnÃ­m rozsahu 0-3,3V. StejnÃ½m postupem pak lze zjistit rozliÅ¡enÃ­ pro plnÃ½ 
rozsah = 5,4mV. 
VÃ½stupnÃ­ konektor J3 je dÃ¡le opatÅ™en nÄ›kolika piny s nulovÃ½m potenciÃ¡lem, vyvedenÃ½m 
napÃ¡jenÃ­m (3.3V z DC/DC mÄ›niÄe i pÅ™Ã­mÃ½m napÃ¡jenÃ­m z USB), ÄtyÅ™mi GPIO piny a 
vÃ½konovÃ½mi vÃ½stupy. Pin 16 pak zÅ¯stal nevyuÅ¾it jako ochrana proti pÅ™evrÃ¡cenÃ­ mÄ›Å™Ã­cÃ­ch 
pÅ™Ã­pravkÅ¯. 
VÃ½stupnÃ­ (vÃ½konovÃ©) regulÃ¡tory jsou Å™Ã­zeny D/A pÅ™evodnÃ­kem A. ObÄ› poloviny zde splÃ½vajÃ­ 
v jeden komplexnÄ›jÅ¡Ã­ regulÃ¡tor s komplementÃ¡rnÃ­ dvojicÃ­ vÃ½konovÃ½ch tranzistorÅ¯ typu 
MOSFET, kde napÃ¡jecÃ­ ÄÃ¡st je zapojena v reÅ¾imu CV a zÃ¡tÄ›Å¾ v reÅ¾imu CC13 referenÄnÄ› vÅ¯Äi 
zemi.14 ZaÅ™Ã­zenÃ­ tedy nenÃ­ schopnÃ© okamÅ¾itÄ› pÅ™epÃ­nat mezi CC a CV mÃ³dy a zpÄ›tnÃ¡ vazba 
ref. napÄ›tÃ­ na spÃ­nanÃ© zemi je realizovÃ¡na digitÃ¡lnÄ›15. JednÃ¡ se o malÃ½ kompromis mezi 
komplexitou zapojenÃ­ a jeho univerzÃ¡lnostÃ­. U zaÅ™Ã­zenÃ­ se nepÅ™edpoklÃ¡dÃ¡ ÄastÃ© pÅ™echÃ¡zenÃ­ 
mezi CC/CV mÃ³dy a mÅ¯Å¾e tedy pÅ™i pÅ™echodu dojÃ­t k poklesu vÃ½stupnÃ­ho napÄ›tÃ­ neÅ¾ 
zareaguje MCU. 
13 Viz literatura (23), sekce 6.9 â€“ programovatelnÃ½ proudovÃ½ zdroj 
14 Ve smyslu sÃ­tÄ› GND pouÅ¾itÃ© jako zemnÃ­cÃ­ i napÃ¡jecÃ­ (zÃ¡pornÃ½ pÃ³l napÃ¡jenÃ­) 
15 Pro zpÄ›tnou kontrolu napÄ›tÃ­ na VOUT a GOUT jsou pÅ™ipojeny sÃ­tÄ› RV0 a RV1 na A/D pÅ™evodnÃ­k MCU - 10 - 
KONCEPCE HARDWAROVÃ‰ ÄŒÃSTI 
 - 11 - 
2.5 SignÃ¡lovÃ© vstupy 
KlÃ­Äovou komponentou signÃ¡lovÃ½ch vstupÅ¯ je dvoukanÃ¡lovÃ½ 12-bit A/D pÅ™evodnÃ­k 
MCP320216 se vzorkovacÃ­ frekvencÃ­ 100kHz (pÅ™i 5V napÃ¡jenÃ­). A/D pÅ™evodnÃ­ky jsou takÃ© 
vybaveny programovatelnou odboÄkou z internÃ­ nap. reference a lze tak upravit zesÃ­lenÃ­ na 
vybranÃ©m vstupu (buÄ plnÃ½ nebo poloviÄnÃ­ rozsah). Na oba jeho vstupy jsou pÅ™ipojeny 
aktivnÃ­ filtry (dolnÃ­ propusti) druhÃ©ho Å™Ã¡du typu Butterworth-Bessel. PropustnÃ© pÃ¡smo je zde 
nastaveno na 10kHz (viz Fig. 1). 
 
 
Fig. 1 - Ãštlum aktivnÃ­ filtrace vstupnÃ­ch zesilovaÄÅ¯ (modÅ™e) a vyznaÄenÃ© pÃ¡smo B3 (oranÅ¾ovÄ›) 
 
ZesÃ­lenÃ­ vstupnÃ­ch OZ (U7A a U7B) je moÅ¾nÃ© kalibrovat pÅ™ipojenÃ­m rezistoru na vstupy 
AREFx, kterÃ© v pÅ™Ã­padÄ› nevyuÅ¾itÃ­ MUSÃ BÃT UZEMÄšNY, jinak dojde k vychÃ½lenÃ­ 
zesÃ­lenÃ­ a zaÅ™Ã­zenÃ­ bude mÄ›Å™it chybnÄ›. V pÅ™Ã­padÄ› potÅ™eby kalibrace je moÅ¾nÃ© zesÃ­lenÃ­ tÄ›chto 
ÄlÃ¡nkÅ¯ upravit dle vzorce (3). 
ï¿½
ï¿½ğ‘¢=10
 78 âˆ™1+( 10000
 ğ‘…ğ‘…ğ¸ğ¹+68000) (3) 
 
 
16 Viz literatura (22) -25-20-15-10-5
 0
 5
 0,1 1 10 100
 Au [dB]
 Frekvence [kHz]
KONCEPCE HARDWAROVÃ‰ ÄŒÃSTI 
Vstupy AREFx jsou ovÅ¡em primÃ¡rnÄ› urÄeny k napÄ›Å¥ovÃ©mu posuvu vstupÅ¯. V pÅ™Ã­padÄ› 
potÅ™eby pÅ™esnÃ©ho mÄ›Å™enÃ­ napÄ›tÃ­ v malÃ©m rozsahu â€“ viz pÅ™Ã­klad: 
Na mÄ›Å™enÃ©m pÅ™Ã­pravku je tÅ™eba mÄ›Å™it vÃ½stupnÃ­ napÄ›tÃ­ s vysokou pÅ™esnostÃ­ v rozmezÃ­ 
14 - 17V. V takovÃ©m pÅ™Ã­padÄ› lze pÅ™ipojit referenÄnÃ­ napÄ›Å¥ovÃ½ zdroj (tÅ™eba 12V) a na A/D 
pÅ™evodnÃ­ku nastavit poloviÄnÃ­ rozsah.  
VstupnÃ­ zesilovaÄe jsou navrÅ¾eny s malou napÄ›Å¥ovou rezervou a pÅ™i vstupnÃ­m napÄ›tÃ­ 20V 
nebude vyuÅ¾it plnÃ½ 12-ti bitovÃ½ rozsah pÅ™evodnÃ­ku (hornÃ­ hranice rozsahu je dÃ¡na napÃ¡jecÃ­m 
napÄ›tÃ­m 3,3V). MaximÃ¡lnÃ­ vÃ½stupnÃ­ napÄ›tÃ­ ze zesilovaÄÅ¯ lze vypoÄÃ­tat s vyuÅ¾itÃ­m vzorce 
vÃ½Å¡e (3), ğ‘…ğ‘…ğ¸ğ¹ = 0Î©: 
ï¿½
ï¿½ğ´ğ¶ğ»ğ‘¥ = ğ‘ˆğ´ğ¼ğ‘ğ‘¥ âˆ™ ğ´ğ‘¢ = 20âˆ™0,1471 = 2,941ğ‘‰ 
(4) 
PorovnÃ¡nÃ­m s napÃ¡jecÃ­m napÄ›tÃ­m A/D pÅ™evodnÃ­ku a jeho rozsahem pak dostaneme 
skuteÄnou nejvyÅ¡Å¡Ã­ vÃ½stupnÃ­ hodnotu (5): 
ï¿½
ï¿½ğ‘‚ğ‘ˆğ‘‡ = ğ‘ˆğ´ğ¶ğ»ğ‘¥
 3,3
 âˆ™ 212 = 2,941
 3,3
 âˆ™ 4096 = 3651 
A ze skuteÄnÃ©ho rozsahu pak lze zjistit napÄ›Å¥ovÃ© rozliÅ¡enÃ­ (6): 
ï¿½
ï¿½ğ‘…ğ¸ğ‘† = ğ‘ˆğ´ğ¼ğ‘ğ‘¥
 ğ‘›ğ‘‚ğ‘ˆğ‘‡
 = 20
 3651
 =5,48 ğ‘šğ‘‰ 
(5) 
(6) 
V pÅ™Ã­padÄ› vyuÅ¾itÃ­ poloviny rozsahu pak lze rozliÅ¡enÃ­ zvÃ½Å¡it na 2,74mV, pÅ™Ã­padnÄ› pak ruÄnÃ­ 
Ãºpravou hodnoty R32 a R33 na niÅ¾Å¡Ã­ hodnotu.  - 12 - 
UÅ½IVATELSKÃ APLIKACE 
3 UÅ¾ivatelskÃ¡ aplikace 
Software pro vyvÃ­jenou platformu se sklÃ¡dÃ¡ ze dvou ÄÃ¡stÃ­ â€“ uÅ¾ivatelskÃ©ho rozhranÃ­ pro 
sprÃ¡vu zaÅ™Ã­zenÃ­ a firmware bÄ›Å¾Ã­cÃ­ho na desce. Ten se pak starÃ¡ jiÅ¾ o samotnÃ© Å™Ã­zenÃ­ periferiÃ­ 
apod. Komunikace je realizovÃ¡na pomocÃ­ protokolu MQTT. 
Pro sprÃ¡vu zaÅ™Ã­zenÃ­ bÄ›Å¾Ã­ na serveru jednoduchÃ¡ aplikace vytvoÅ™enÃ¡ pomocÃ­ nÃ¡stroje Flask. 
Je psÃ¡na v jazyce Python a dovoluje zÃ¡kladnÃ­ ovlÃ¡dÃ¡nÃ­ zaÅ™Ã­zenÃ­ â€“ nastavenÃ­ parametrÅ¯, 
spuÅ¡tÄ›nÃ­ mÄ›Å™enÃ­, export dat a jejich vizualizaci. DÃ¡le takÃ© obsahuje jednoduchou SQLite 
databÃ¡zi uÅ¾ivatelÅ¯ a moÅ¾nosti pÅ™ihlÃ¡Å¡enÃ­/registrace. 
Obr.  6 - Foto uÅ¾iv. rozhranÃ­ (v grafu ref. VA charakteristika diody v reÅ¾imu CC) 
Aplikace umoÅ¾Åˆuje provÃ¡dÄ›t 4 typy mÄ›Å™enÃ­: 
â€¢ V-A charakteristiky v reÅ¾imu CC/CV 
â€¢ FrekvenÄnÃ­ a fÃ¡zovou odezvu (Bodeho diagram) 
â€¢ Skokovou odezvu 
â€¢ ImpulznÃ­ odezvu - 13 - 
UÅ½IVATELSKÃ APLIKACE 
Obr.  7 - OvlÃ¡dacÃ­ prvky jednotlivÃ½ch typÅ¯ mÄ›Å™enÃ­ 
OvlÃ¡dacÃ­ prvky jsou oÅ¡etÅ™eny proti zadÃ¡nÃ­ neplatnÃ½ch parametrÅ¯ a takovÃ½ch, kterÃ© jiÅ¾ 
zaÅ™Ã­zenÃ­ nedokÃ¡Å¾e zpracovat. OmezenÃ­ jsou: 
â€¢ VÃ½stupnÃ­ napÄ›tÃ­: 0-20V 
â€¢ VÃ½stupnÃ­ proud: 0-3A 
â€¢ FrekvenÄnÃ­ rozsah 10Hz-10kHz 
â€¢ DÃ©lka impulzu: min. 10ğœ‡ğ‘ 17 
Pro vizualizaci byla vyuÅ¾ita knihovna Plotly. Grafy jsou tak interaktivnÃ­ a lze je takÃ© 
exportovat pÅ™Ã­mo do formÃ¡tu PNG 
17 OmezenÃ­ je dÃ¡no rychlostÃ­ pÅ™ebÄ›hu D/A pÅ™evodnÃ­ku a komunikace. Viz literatura (23), sekce 1 - 14 - 
UÅ½IVATELSKÃ APLIKACE 
Obr.  8 - IlustraÄnÃ­ export skokovÃ© odezvy 
DÅ¯leÅ¾itÃ© je zde podotknout, Å¾e aplikace nenÃ­ ve svÃ© finÃ¡lnÃ­ fÃ¡zi. JednÃ¡ se spÃ­Å¡e o â€MVPâ€œ pro 
demonstraci funkce. NapÅ™. u obrÃ¡zku 8 (vÃ½Å¡e) by bylo praktickÃ© vyznaÄit Äasovou konstantu 
obvodu, resp. bod nevÄ›tÅ¡Ã­ho rÅ¯stu, pÅ™Ã­padnÄ› dalÅ¡Ã­ mÄ›Å™itelnÃ© parametry. DÃ¡le je tÅ™eba 
doopravit Å¡kÃ¡lovÃ¡nÃ­ apod. 
Z technickÃ©ho hlediska aplikaci chybÃ­ sprÃ¡va tÃ½mÅ¯ a registrovanÃ½ch zaÅ™Ã­zenÃ­ (a jejich 
pÅ™iÅ™azenÃ­ jednotlivÃ½m uÅ¾ivatelÅ¯m). TakovÃ© funkce by dovolily nasazenÃ­ pÅ™Ã­mo na cviÄenÃ­ch 
(napÅ™.: KET/FYE, KET/ELM, KET/ELTM a dalÅ¡Ã­ch) - 15 - 
ZÃVÄšR 
ZÃ¡vÄ›r 
CÃ­lem tÃ©to prÃ¡ce bylo vyvinout zaÅ™Ã­zenÃ­ pro podporu bezkontaktnÃ­ vÃ½uky, primÃ¡rnÄ› pro 
potÅ™eby kombinovanÃ© formy studia. OvÅ¡em vÃ½bÄ›r komponent dovolil minimalizaci zaÅ™Ã­zenÃ­ 
a bylo by zbyteÄnÄ› nÃ¡kladnÃ© a nepraktickÃ© navrhovat a vyrÃ¡bÄ›t napÅ™. stolnÃ­ charakterograf, 
pokud nelze skuteÄnÄ› vyuÅ¾Ã­t velikost zaÅ™Ã­zenÃ­ pro lepÅ¡Ã­ komponenty s vyÅ¡Å¡Ã­m 
rozliÅ¡enÃ­m/rychlostÃ­ apod., ovlÃ¡dacÃ­mi a zobrazovacÃ­mi prvky apod. VÃ½voj by byl pÅ™Ã­liÅ¡ 
nÃ¡kladnÃ½ a zdlouhavÃ½, nehledÄ› na znalosti k tomu potÅ™ebnÃ©.  
Ve zvolenÃ©m provedenÃ­ ovÅ¡em vznikÃ¡ nÄ›co lehce odliÅ¡nÃ©ho, avÅ¡ak splÅˆujÃ­cÃ­ho zÃ¡kladnÃ­ 
myÅ¡lenku projektu â€“ malÃ¡ laboratoÅ™, dokonce kapesnÃ­ velikosti. PÅ™ipravenÃ¡ na mÄ›Å™enÃ­ do 
nÄ›kolika minut. JednoduÅ¡e ovladatelnÃ¡ mobilnÃ­m telefonem Äi tabletem odkudkoliv. 
Dle mÃ©ho nÃ¡zoru praktiÄnost zaÅ™Ã­zenÃ­ a jeho pÅ™ijatelnÃ¡ vÃ½robnÃ­ cena18 vyvaÅ¾ujÃ­ horÅ¡Ã­ 
technickÃ© parametry (primÃ¡rnÄ› vzorkovacÃ­ rychlost, napÄ›Å¥ovÃ© rozsahy apod.) v porovnÃ¡nÃ­ 
napÅ™. i jen se zÃ¡kladnÃ­m digitÃ¡lnÃ­m osciloskopem. 
BÄ›hem pÅ™Ã­pravy tÃ©to prÃ¡ce autor nepouÅ¾il jakÃ©koliv nÃ¡stroje AI k generovÃ¡nÃ­ obsahu tÃ©to 
prÃ¡ce. AI byla vyuÅ¾ita pouze pÅ™i psanÃ­ software pro samotnÃ© zaÅ™Ã­zenÃ­ a webovou aplikaci, a 
to v podobÄ› programu GitHub Copilot (model Gemini 2.5 Pro). Po pouÅ¾itÃ­ tÄ›chto nÃ¡strojÅ¯ 
autor peÄlivÄ› zkontroloval veÅ¡kerÃ© generovanÃ© softwarovÃ© souÄÃ¡sti a pÅ™ebÃ­rÃ¡ plnou 
zodpovÄ›dnost za jejich vÃ½slednou podobu.
 18 V rÃ¡mci vÃ½voje byla objednÃ¡na vÃ¡rka testovacÃ­ch 5-ti ks zaÅ™Ã­zenÃ­ v cenÄ› pohybujÃ­cÃ­ se kolem 1tis. KÄ/ks - 16 - 
LITERATURA 
Literatura 
1. Alpha & Omega Semiconductor. AOD4185 P-Channel Enhancement Mode Field Effect 
Transistor. Alpha & Omega Semiconductor. [Online] 2013. [Citace: 3. 5 2025.] 
https://www.aosmd.com/res/datasheets/AOD4185.pdf. AOD4185. 
2. â€”. AOD4186 N-Channel Enhancement Mode Field Effect Transistor. Alpha & Omega 
Semiconductor. 
[Online] 
2017. 
[Citace: 
3. 
5 
2025.] 
https://www.lcsc.com/datasheet/lcsc_datasheet_2410121957_Alpha---Omega-Semicon
AOD4186_C111914.pdf. AOD4186. 
3. Espressif Systems. ESP Hardware Design Guidelines - ESP32-S3. ESP Hardware Design 
Guideline. 
[Online] 
Espressif 
Systems, 
2024. 
https://docs.espressif.com/projects/esp-hardware-design
guidelines/en/latest/esp32s3/index.html. 
[Citace: 
3. 
5 
2025.] 
4. â€”. ESP-IDF Programming Guide - ESP32-S3. ESP-IDF Programming Guide. [Online] 
Espressif Systems, 2024. [Citace: 3. 5 2025.] https://docs.espressif.com/projects/esp
idf/en/v5.4.1/esp32s3/index.html. 
5. Analog Devices, Inc. Filter Design Tool (Filter Wizard). Filter Design Tool. [Online] 
Analog Devices, Inc., 2025. [Citace: 2. 4 2025.] https://tools.analog.com/en/filterwizard/. 
6. â€”. AD8531/AD8532/AD8534 Low Cost, 250 mA Output, Single-Supply Amplifiers. 
[Online] 2002. [Citace: 6. 4 2025.] https://www.analog.com/media/en/technical
documentation/data-sheets/ad8531_8532_8534.pdf. 
7. Diodes Inc. AP63203 - 3.8V TO 32V INPUT, 2A LOW IQ SYNCHRONOUS BUCK 
WITH ENHANCED EMI REDUCTION. [Online] 2021. [Citace: 1. 2 2025.] 
https://www.diodes.com/assets/Datasheets/AP63200-AP63201-AP63203-AP63205.pdf. 
AP63200/AP63201/AP63203/AP63205. 
8. Espressif Systems. ESP32-S3 Series Datasheet. [Online] 2023. [Citace: 17. 3 2025.] 
https://www.espressif.com/sites/default/files/documentation/esp32-s3_datasheet_en.pdf. 
9. â€”. ESP32-S3 Technical Reference Manual. [Online] 2023. [Citace: 21. 4 2025.] 
https://www.espressif.com/sites/default/files/documentation/esp32
s3_technical_reference_manual_en.pdf. 
10. Frisch, Herbert. ZÃ¡klady elektroniky a elektronickÃ½ch obvodÅ¯. Praha : SNTL - 
NakladatelstvÃ­ technickÃ© literatury, 1992. 04-502-87. - 17 - 
LITERATURA 
11. Kolombet, E., JurkoviÄ, K. a Zodl, J. VyuÅ¾itie analÃ³govÃ½ch integrovanÃ½ch obvodov. 
Bratislava : Alfa, 1989. 80-05-00528-8. 
12. MalÃ½, Martin. Hradla, volty, jednoÄipy. Praha : Edice CZ.NIC, 2017. 978-80-88168
23-2. 
13. â€”. ESP32 prakticky. Praha : Edice CZ.NIC, 2024. 978-80-88168-79-9. 
14. Rogers, Andrew a Averyt, Josh. AN1974 - Introduction to USB Power Delivery Over 
the USB Type-C Cable. Microchip Technology Inc. mÃ­sto neznÃ¡mÃ© : Microchip Technology 
Inc., 2015. DS00001974A. 
15. Rogers, Andrew. AN1953 - Introduction to USB Type-C. Microchip Technology Inc. 
mÃ­sto neznÃ¡mÃ© : Microchip Technology Inc., 2015. DS00001953A. 
16. Microchip Technology Inc. AN699 - Anti-Aliasing, Analog Filters for Data Acquisition 
Systems. 
[Online] 
2000. 
[Citace: 
3. 
5 
2025.] 
https://ww1.microchip.com/downloads/aemDocuments/documents/MCU08/ApplicationNo
 tes/ApplicationNotes/00699b.pdf. DS00699B. 
17. â€”. AN 16.9 - USB331x USB Transceiver Layout Guidelines. [Online] 2019. [Citace: 
21. 
4 
2025.] 
https://ww1.microchip.com/downloads/aemDocuments/documents/OTH/ApplicationNotes
 /ApplicationNotes/AN16.9-Application-Note-DS00002947A.pdf. DS00002947A. 
18. Burdette, William. AN 25.16 - USB Charging Port ESD Protection Tips for UCS100x. 
[Online] 
2016. 
[Citace: 
21. 
4 
2025.] 
https://ww1.microchip.com/downloads/aemDocuments/documents/OTH/ApplicationNotes
 /ApplicationNotes/20005230A.pdf. DS20005230A. 
19. Rogers, Andrew. AN1914 - Basic USB Type-C Upstream Facing Port Implementation. 
[Online] 
2015. 
[Citace: 
22. 
2 
2021.] 
https://ww1.microchip.com/downloads/aemDocuments/documents/OTH/ApplicationNotes
 /ApplicationNotes/00001914B.pdf. DS00001914B. 
20. AmatÃ©rskÃ© RÃ¡dio pro konstruktÃ©ry. Ing. PetÅ™Ã­k, Josef. 2, mÃ­sto neznÃ¡mÃ© : MAGNET
PRESS, 1992, Sv. 2. 0139-7087. 
21. Stanford University. SPICE â€˜Quickâ€™ Reference Sheet. [Online] 2001. [Citace: 3. 3 
2025.] https://web.stanford.edu/class/ee133/handouts/general/spice_ref.pdf. EE133-Winter 
2001. 
Serial 
22. Microchip Technology Inc. MCP3202 - 2.7V Dual Channel 12-Bit A/D Converter with 
SPI 
Interface. 
[Online] 
2011. 
[Citace: 
28. 
4 
2025.] - 18 - 
LITERATURA 
https://ww1.microchip.com/downloads/aemDocuments/documents/APID/ProductDocumen
 ts/DataSheets/21034F.pdf. DS21034F. 
23. â€”. MCP4822 - 12-Bit Dual Voltage Output Digital-to-Analog Converter with Internal 
VREF and SPI Interface. [Online] 2015. [Citace: 28. 4 2025.] 
https://ww1.microchip.com/downloads/en/DeviceDoc/20002249B.pdf. DS20002249B. 
24. Texas Instruments Inc. LMx24, LMx24x, LMx24xx, LM2902, LM2902x, LM2902xx, 
LM2902xxx Quadruple Operational Amplifiers. [Online] 2024. [Citace: 28. 4 2025.] 
https://www.ti.com/lit/ds/symlink/lm324.pdf. SLOS066AD. 
25. Texas Instruments. System-Level ESD Protection Guide. [Online] 2022. [Citace: 3. 5 
2025.] https://www.ti.com/lit/sg/sszb130d/sszb130d.pdf. SSZB130D. 
26. WCH (Jiangsu Qinheng Co., Ltd.). USB PD Multi Fast Charging Protocol Power 
Receiving Chip CH224. [Online] 2025. [Citace: 3. 5 2025.] https://www.wch
ic.com/downloads/file/302.html. CH224DS1. 
27. VÃ­ce autorÅ¯. USB hardware. Wikipedia, The Free Encyclopedia. [Online] 10. 5 2025. 
[Citace: 10. 5 2025.] https://en.wikipedia.org/wiki/USB_hardware#USB_power_delivery. 
28. Clark, Mel a Walters, Kent. MicroNote 121: Protecting Data I/O Parts with TVS 
Arrays. 
[Online] 
2018. 
[Citace: 
28. 
4 
2025.] 
https://ww1.microchip.com/downloads/aemDocuments/documents/HRDS/ApplicationNote
 s/ApplicationNotes/MicroNote121.pdf. 
29. Walters, Kent a Clark, Mel. MicroNote 103: What is a TVS? [Online] 2018. [Citace: 
28. 
4 
2025.] 
https://ww1.microchip.com/downloads/aemDocuments/documents/HRDS/ApplicationNote
 s/ApplicationNotes/MicroNote103.pdf. 
30. Oji, Obi. ESD and Surge Protection for USB Interfaces. [Online] 2024. [Citace: 3. 5 
2025.] https://www.ti.com/lit/an/slvaf82b/slvaf82b.pdf. slvaf82b. 
31. 
McGaffin, 
Adam. [Online] 9 2024. [Citace: 30. 4 2025.] 
https://www.ti.com/lit/ta/ssztd49a/ssztd49a.pdf?ts=1746878821582. SSZTD49A. 
32. 
Flask 
documentation. 
[Online] 
https://flask.palletsprojects.com/en/stable/. 
Plotly.py. 
[Citace: 
33. SQLite. [Online] [Citace: 10. 5 2025.] https://www.sqlite.org/. 
34. 
GitHub.com. 
https://github.com/plotly/plotly.py. 
[Online] 
Plotly. 
[Citace: 
10. 
5 
10. 
2025.] 
5 
2025.] - 19 - 
SEZNAM OBRÃZKÅ® 
 - 20 - 
Seznam obrÃ¡zkÅ¯ 
Obr.  1 - ZjednoduÅ¡enÃ© blokovÃ© schÃ©ma zaÅ™Ã­zenÃ­ ............................................................. - 2 - 
Obr.  2 - ZjednoduÅ¡enÃ© blokovÃ© schÃ©ma s rozdÄ›lenou mÄ›Å™Ã­cÃ­ ÄÃ¡stÃ­ ................................. - 4 - 
Obr.  3 - ZjednoduÅ¡enÃ© blokovÃ© schÃ©ma zaÅ™Ã­zenÃ­ z pohledu MCU .................................. - 5 - 
Obr.  4 - blokovÃ© schÃ©ma navrÅ¾enÃ©ho zaÅ™Ã­zenÃ­ ................................................................. - 6 - 
Obr.  5 - Vizualizace konceptu (spodnÃ­ strana) ................................................................ - 7 - 
Obr.  6 - Foto uÅ¾iv. rozhranÃ­ (v grafu ref. VA charakteristika diody v reÅ¾imu CC) ....... - 13 - 
Obr.  7 - OvlÃ¡dacÃ­ prvky jednotlivÃ½ch typÅ¯ mÄ›Å™enÃ­ ........................................................ - 14 - 
Obr.  8 - IlustraÄnÃ­ export skokovÃ© odezvy .................................................................... - 15 - 
 
VeÅ¡kerÃ© obrÃ¡zky jsou vlastnÃ­ 
Seznam tabulek 
Tab. 1 - PÅ™ehled napÃ¡jecÃ­ch rozsahÅ¯ USB PD .................................................................. - 3 - 
 
Seznam pÅ™Ã­loh 
I. SchÃ©ma zapojenÃ­ celÃ©ho zaÅ™Ã­zenÃ­ 
II. VÃ½robnÃ­ soubory PCB (elektronicky) 
III. Firmware zaÅ™Ã­zenÃ­ (elektronicky) 
IV. Å˜Ã­dÃ­cÃ­ aplikace (elektronicky) 